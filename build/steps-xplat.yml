##
# xplat Native Simulator build
##
steps:

- bash: ./bootstrap.sh
  displayName: "Bootstrap Native QuantumSimulator"
  workingDirectory: $(System.DefaultWorkingDirectory)/src/Simulation/Native


- task: CMake@1
  displayName: 'CMake  --build build'
  inputs:
    workingDirectory: $(System.DefaultWorkingDirectory)/src/Simulation/Native
    cmakeArgs: ' --build build'


- task: CopyFiles@2
  displayName: 'Copy Files to: artifact staging directory'
  inputs:
    SourceFolder: '$(System.DefaultWorkingDirectory)'
    Contents: 'src/Simulation/Native/build/**'
    TargetFolder: '$(Build.ArtifactStagingDirectory)'


- task: PublishBuildArtifacts@1
  displayName: 'Publish Artifact: xplat'
  inputs:
    PathtoPublish: '$(Build.ArtifactStagingDirectory)'
    artifactName: xplat


